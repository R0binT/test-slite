{"version":3,"sources":["../../models/user.js"],"names":["UserSchema","Schema","username","type","String","unique","required","password","pre","callback","user","isModified","genSalt","err","salt","hash","methods","verifyPassword","cb","compare","isMatch","module","exports","model"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAIA,aAAa,IAAI,mBAASC,MAAb,CAAoB;AACnCC,YAAU;AACRC,UAAMC,MADE;AAERC,YAAQ,IAFA;AAGRC,cAAU;AAHF,GADyB;AAMnCC,YAAU;AACRJ,UAAMC,MADE;AAERE,cAAU;AAFF;AANyB,CAApB,CAAjB;;AAYAN,WAAWQ,GAAX,CAAe,MAAf,EAAuB,UAAUC,QAAV,EAAoB;AACzC,MAAIC,OAAO,IAAX;;AAEA,MAAI,CAACA,KAAKC,UAAL,CAAgB,UAAhB,CAAL,EAAkC,OAAOF,UAAP;;AAElC,yBAAOG,OAAP,CAAe,CAAf,EAAkB,UAACC,GAAD,EAAMC,IAAN,EAAe;AAC/B,QAAID,GAAJ,EAAS,OAAOJ,SAASI,GAAT,CAAP;;AAET,2BAAOE,IAAP,CAAYL,KAAKH,QAAjB,EAA2BO,IAA3B,EAAiC,IAAjC,EAAuC,UAACD,GAAD,EAAME,IAAN,EAAe;AACpD,UAAIF,GAAJ,EAAS,OAAOJ,SAASI,GAAT,CAAP;AACTH,WAAKH,QAAL,GAAgBQ,IAAhB;AACAN;AACD,KAJD;AAKD,GARD;AASD,CAdD;;AAgBAT,WAAWgB,OAAX,CAAmBC,cAAnB,GAAoC,UAAUV,QAAV,EAAoBW,EAApB,EAAwB;AAC1D,yBAAOC,OAAP,CAAeZ,QAAf,EAAyB,KAAKA,QAA9B,EAAwC,UAACM,GAAD,EAAMO,OAAN,EAAkB;AACxD,QAAIP,GAAJ,EAAS,OAAOK,GAAGL,GAAH,CAAP;AACTK,OAAG,IAAH,EAASE,OAAT;AACD,GAHD;AAID,CALD;;AAOAC,OAAOC,OAAP,GAAiB,mBAASC,KAAT,CAAe,MAAf,EAAuBvB,UAAvB,CAAjB","file":"user.js","sourcesContent":["import mongoose from 'mongoose';\nimport bcrypt from 'bcrypt-nodejs';\n\nvar UserSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  password: {\n    type: String,\n    required: true\n  }\n});\n\nUserSchema.pre('save', function (callback) {\n  var user = this;\n\n  if (!user.isModified('password')) return callback();\n\n  bcrypt.genSalt(5, (err, salt) => {\n    if (err) return callback(err);\n\n    bcrypt.hash(user.password, salt, null, (err, hash) => {\n      if (err) return callback(err);\n      user.password = hash;\n      callback();\n    });\n  });\n});\n\nUserSchema.methods.verifyPassword = function (password, cb) {\n  bcrypt.compare(password, this.password, (err, isMatch) => {\n    if (err) return cb(err);\n    cb(null, isMatch);\n  });\n};\n\nmodule.exports = mongoose.model('User', UserSchema);\n"]}