{"version":3,"sources":["../../controllers/auth.js"],"names":["use","BasicStrategy","username","password","callback","findOne","err","user","verifyPassword","isMatch","exports","isAuthenticated","authenticate","session"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,mBAASA,GAAT,CAAa,IAAI,uBAAaC,aAAjB,CAA+B,UAACC,QAAD,EAAWC,QAAX,EAAqBC,QAArB,EAAkC;AAC1E,iBAAKC,OAAL,CAAa,EAAEH,UAAUA,QAAZ,EAAb,EAAqC,UAACI,GAAD,EAAMC,IAAN,EAAe;AAClD,QAAID,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET,QAAI,CAACC,IAAL,EAAW,OAAOH,SAAS,IAAT,EAAe,KAAf,CAAP;;AAEXG,SAAKC,cAAL,CAAoBL,QAApB,EAA8B,UAACG,GAAD,EAAMG,OAAN,EAAkB;AAC9C,UAAIH,GAAJ,EAAS,OAAOF,SAASE,GAAT,CAAP;;AAET,UAAI,CAACG,OAAL,EAAc,OAAOL,SAAS,IAAT,EAAe,KAAf,CAAP;;AAEd,aAAOA,SAAS,IAAT,EAAeG,IAAf,CAAP;AACD,KAND;AAOD,GAZD;AAaD,CAdU,CAAb;;AAiBAG,QAAQC,eAAR,GAA0B,mBAASC,YAAT,CAAsB,OAAtB,EAA+B,EAAEC,SAAU,KAAZ,EAA/B,CAA1B","file":"auth.js","sourcesContent":["import passport from 'passport';\nimport passportHttp from 'passport-http';\nimport User from '../models/user';\n\npassport.use(new passportHttp.BasicStrategy((username, password, callback) => {\n    User.findOne({ username: username }, (err, user) => {\n      if (err) return callback(err);\n\n      if (!user) return callback(null, false);\n\n      user.verifyPassword(password, (err, isMatch) => {\n        if (err) return callback(err);\n\n        if (!isMatch) return callback(null, false);\n\n        return callback(null, user);\n      });\n    });\n  }\n));\n\nexports.isAuthenticated = passport.authenticate('basic', { session : false });\n"]}